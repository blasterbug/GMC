% Description of test protocol

\Subsection{Ordering}
% Testing of causal ordering
	% Connect two clients, send message, connect third client, send message from first, shows vector clock set correctly.
	\textbf{Prerequisite}: Causal order, basic multicast
	\textbf{Tests}: Messaging, causal ordering
	\textbf{Shows}: vector clock set correctly when joining already communicating group

	\begin{tabular}{ll}
		\texttt{Action} & \texttt{Expected result} \\
		Connect client $c_1$ & Nameserver should register client as leader \\
		Connect client $c_2$ & Leader should be notified of join \\
		$c_1$ sends message & Both receive message \\
		Connect client $c_3$ & $c_1$, $c_2$ should be notified \\
		$c_1$ sends message & All receive message \\
	\end{tabular}
	% Connect two clients, send message, connect third client, send message from third, shows vector clock set correctly.

	\textbf{Prerequisite}: Causal order, basic multicast
	\textbf{Tests}: Messaging, causal ordering
	\textbf{Shows}: vector clock set correctly when joining already communicating group
	\begin{tabular}{ll}
		\texttt{Action} & \texttt{Expected result} \\
		Connect client $c_1$ & Nameserver should register client as leader \\
		Connect client $c_2$ & Leader should be notified of join \\
		$c_1$ sends message & Both receive message \\
		Connect client $c_3$ & $c_1$, $c_2$ should be notified \\
		$c_3$ sends message & All receive message \\
	\end{tabular}


	% Connect three clients, send message from first, hold at second, send from third, release at second
	\textbf{Prerequisite}: Causal order, basic multicast
	\textbf{Tests}: Casual ordering
	\textbf{Shows}: 

	\begin{tabular}{ll}
		\texttt{Action} & \texttt{Expected result} \\
		Connect clients $c_1$, $c_2$, $c_3$ & All connected\\
		$c_1$ sends message $m_1$ & -\\
		$c_2$ holds message $m_1$ & $m_1$ delivered at $c_1$ and $c_3$ \\
		$c_3$ sends message $m_2$ & $m_2$ delivered at $c_1$ and $c_3$ \\
		Release $m_1$ at $c_2$ & $m_1$ and $m_2$ delivered at $c_2$ \\
	\end{tabular}

% Testing of FIFO ordering

% Testing of multicast

\Subsection{Election}
% Testing of re-election
	% Connect three clients, check nameserver, send message, disconnect first client, check nameserver for new leader, connect new client
	\textbf{Tests}:
	\textbf{Shows}:

	\begin{tabular}{ll}
		\texttt{Action} & \texttt{Expected result} \\
		Connect clients $c_1$, $c_2$, $c_3$ & All connected, $c_1$ leader in nameserver \\
		$c_1$ sends message $m_1$ & All receive \\
		Disconnect $c_1$ & A new leader should be found in nameserver \\
	\end{tabular}

	% Same but crash
	\textbf{Tests}:
	\textbf{Shows}:

	\begin{tabular}{ll}
		\texttt{Action} & \texttt{Expected result} \\
		Connect clients $c_1$, $c_2$, $c_3$ & All connected, $c_1$ leader in nameserver \\
		$c_1$ sends message $m_1$ & All receive \\
		Crash $c_1$ & - \\
		$c_2$ sends message $m_2$ & All receive, election should be initiated and new leader should be shown in nameserver \\
	\end{tabular}



% Testing of disconnecting client
	% Connect three clients, send message, disconnect client, send message

% Testing of slow client
	% How, why?

% Testing of view
	% Connect two clients, send message, connect third one, send message, shows view

% General testing
	% Connect two clients, send message, close nameserver, send message (should deliver), start nameserver, connect client, send message (should not deliver)

